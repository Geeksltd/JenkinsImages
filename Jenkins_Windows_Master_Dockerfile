FROM microsoft/windowsservercore
ENV JENKINS_VERSION 2.0
ENV HOME /jenkins

# Install Chocolatey
RUN powershell -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))" && \
    setx PATH "%ProgramData%\chocolatey\bin\;%PATH%";

RUN choco install dotnetcore-sdk -y && \
    setx PATH "%ProgramData%\dotnet\;%PATH%;";

# replace-in-file
RUN dotnet tool install -g replace-in-file

# Jenkins
RUN choco install -g Jenkins -y && \
	setx PATH "%PROGRAMFILES(X86)%\Jenkins\;%PATH%;";
